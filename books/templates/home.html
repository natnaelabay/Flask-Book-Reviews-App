{% extends 'base.html' %}

{% block title %} Homepage {% endblock %}

{% block content %}
<main class="">

    <div class="container content-wrapper">
        <div class="row">
            <div class=" col-md-12 col-lg-4  content hidden-sm">
                <div class="banner-text">
                    <p class="main-text"><span> Machine Learning </span> Based recommendation system and Book <span>
                            reviews App. </span></p>

                </div>
            </div>
            <div class="col-md-2 col-sm-2 hidden-xs"></div>
            <div class="col-md-12 col-lg-6  hidden-xs">
                <div class="text-center register">
                    <form action="" id="register-form" enctype="multipart/form-data">
                        <p class=" mt-3 text-center">Sign <span>up</span></p>
                        <p class="text-center">
                            <img src="{{url_for('static', filename='images/ho.png')}}" id="profile-image" class="avatar"
                                alt="">
                        </p>
                        <div>
                            <input type="file" accept="image/*" class="signup-input" id="profile-upload"
                                onchange="loadFile(event)" name="file"> <br>
                        </div>
                        <div>
                            <input type="text" class="mt-3 signup-input" name="f_name" id="f_name"
                                placeholder="First name">
                        </div>
                        <div>
                            <input type="text" class="mt-3 signup-input" name="l_name" id="l_name"
                                placeholder="Last name">
                        </div>
                        <div>
                            <input type="text" class="mt-3 signup-input" name="u_name" id="u_name"
                                placeholder="username">
                        </div>
                        <div>
                            <input type="password" class="mt-3 signup-input" name="password" id="password"
                                placeholder="Password">
                        </div>
                        <div>
                            <input type="password" class="mt-3 signup-input" name="password_confirm"
                                id="password_confirm" placeholder="Password confirmation">
                        </div>
                        <div class="mt-3 text-center" style="font-weight: 200; font-size:0.9rem;">
                            <input type="checkbox" aria-label="Checkbox for following text input">
                            I agree to the <a href="">Terms and conditions.</a>
                        </div>
                        <input type="submit" class="my-3 submit-btn" value="Create Account">
                    </form>
                </div>
            </div>
        </div>
    </div>



    <div class="about-sec mt-5 pb-5 ">
        <div class="about-us container">
            <h2 class="text-center">Experience</h2>
            <div class="mx-1 row flex-row-reverse">
                <div class="col-md-5 col-sm-5 d-flex flex-column justify-content-center">
                    <p class="main-text text-center"><span> Share</span> and rate your experience of a <span> book.
                        </span></p>
                </div>
                <div class="col-md-1 col-sm-1"></div>
                <div class="col-md-1 col-sm-1"></div>
                <div class="col-md-5 col-sm-5">
                    <img src="{{url_for('static', filename='images/m.png')}}" class="image-responsive" alt="">

                </div>
            </div>
        </div>
    </div>

</main>




<footer class="text-center">
    &copy; Natnael Abay ATR/8016/11
</footer>


<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header border-bottom-0">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-title text-center">
                    <h4>Login</h4>
                </div>
                <div class="d-flex flex-column text-center">
                    <form>
                        <div class="form-group">
                            <input type="text" class=" signup-input" placeholder="Last name">

                        </div>
                        <div class="form-group">
                            <input type="text" class=" signup-input" placeholder="Last name">

                        </div>
                        <button type="button" class="btn mt-2 btn-info btn-block btn-round">Login</button>
                    </form>


                </div>
            </div>
            <div class="modal-footer mt-3 d-flex justify-content-center">
                <div class="signup-section">Not a member yet? <a href="#a" class="text-success" id="sign-up"
                        data-dismiss="modal"> Sign Up</a>.</div>
            </div>
        </div>
    </div>
</div>

<script>
    const elem = document.querySelector("#sign-up")
    // const d = document.querySelector('#f_name')
    let f_name = document.querySelector("#f_name")
    let l_name = document.querySelector("#l_name")
    let u_name = document.querySelector("#u_name")
    let password = document.querySelector("#password")
    let file = document.querySelector("#profile-upload")
    let password_confirm = document.querySelector("#password_confirm")
    let registerForm = document.querySelector("#register-form")
    registerForm.addEventListener("submit", e => {
        e.preventDefault()
        const formData = new FormData()
        console.log(f_name)

        // file = file.files
        console.log(file)

        if (f_name.value.length == 0 || l_name.value.length == 0 || u_name.value.length == 0 || password.value.length == 0 || password_confirm.value.length == 0) {
            console.log("empty values present")
        } else {
            formData.append("f_name", f_name.value)
            formData.append("l_name", l_name.value)
            formData.append("u_name", u_name.value)
            formData.append("password", password.value)
            formData.append("img", file.files[0])
            formData.append("password_confirm", password_confirm.value)
            axios({
                method: "post",
                url: "auth/register",
                data: formData,
                headers: { "Content-Type": "multipart/form-data" },
            })
                .then(function (response) {
                    //handle success
                    console.log(response);
                })
                .catch(function (response) {
                    //handle error
                    console.log(response);
                });
            //   <!-- console.log(formData.getAll()) -->
        }
    })
    const loadFile = function (event) {
        var output = document.getElementById('profile-image');
        output.src = URL.createObjectURL(event.target.files[0]);
        output.onload = function () {
            URL.revokeObjectURL(output.src) // free memory
        }
    };
    elem.addEventListener("click", e => {
        d.focus()
    })
        // this is to click the button
        // document.querySelectorAll(".nav-link")[1].click()
</script>
{% endblock %}